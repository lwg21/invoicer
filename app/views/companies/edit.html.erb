<h2>Edit your company information</h2>

<%= form_for @company do |f| %>
  <%= hidden_field_tag :back_url, params[:back_url] %>

  <%= f.label :details, "Company name & address" %>
  <%= f.text_area :details, rows: 8 %>

  <%= f.label :vat_number %>
  <%= f.text_field :vat_number %>

  <%= f.label :phone_number %>
  <%= f.text_field :phone_number %>

  <%= f.label :email_address %>
  <%= f.text_field :email_address %>

  <%= f.label :iban, "IBAN" %>
  <%= f.text_field :iban %>

  <%= f.label :bic, "BIC" %>
  <%= f.text_field :bic %>

  <%= f.label :jurisdiction, "Jurisdiction" %>
  <%= f.text_field :jurisdiction %>

  <%= f.submit %>
<% end %>

<h2>Edit the default mentions appearing on new invoices</h2>

<% @company.mention_defaults.each do |mention| %>
  <%= turbo_frame_tag dom_id(mention) do %>
    <%= form_for mention, html: { class: "form-with-side-buttons" },
                          data: { controller: "revealer" } do |f| %>
      <%= f.text_area :text, data: { action: "keyup->revealer#reveal" } %>
      <div class="side-buttons">
        <%= f.button type: :submit,
                     name: :commit,
                     value: :edit,
                     class: "green disabled",
                     data: { revealer_target: "toReveal" } do %>
          <%= image_tag "check.svg" %>
        <% end %>
        <%= f.button type: :submit,
                     name: :commit,
                     value: :cancel,
                     class: "disabled",
                     data: { revealer_target: "toReveal" } do %>
          <%= image_tag "rotate-ccw.svg" %>
        <% end %>
        <%= f.button type: :submit,
                     name: :commit,
                     value: :destroy,
                     class: "red active",
                     data: { turbo_confirm: "Are you sure?" } do %>
          <%= image_tag "trash.svg" %>
        <% end %>
      </div>
    <% end %>
  <% end %>

<% end %>

<%= form_for [@company, @mention_default] do |f| %>
  <%= f.text_area :text %>
  <%= f.submit "Add mention" %>
<% end %>

<%= link_to profile_path do %>
  <%= image_tag "left.svg" %>
  <span>Back to profile</span>
<% end %>
